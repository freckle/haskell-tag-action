name: Haskell tag
description: Creates a tag based on Haskell package version, if missing
inputs:
  package-yaml:
    description: "Path to package.yaml for reading version"
    required: true
    default: ./package.yaml
  tag-prefix:
    description: "Prefix for tags, default is v"
    required: true
    default: v
outputs:
  tag:
    description: "Tag, if one was created"
    value: ${{ steps.run.outputs.tag }}
runs:
  using: composite
  steps:
    - id: run
      name: Run
      shell: bash
      working-directory: ${{ inputs.working-directory }}
      run: |
        ${{ github.action_path }}/bin/run \
          -y "${{ inputs.package-yaml }}" \
          -p "${{ inputs.tag-prefix }}" \
          -r "${{ github.repository }}" \
          -c "${{ github.sha }}"
